{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      item: {\n        name: '',\n        category_id: '',\n        description: '',\n        image_url: ''\n      },\n      categories: [],\n      file: null\n    };\n  },\n  created() {\n    this.fetchItem();\n    this.fetchCategories();\n  },\n  methods: {\n    fetchItem() {\n      const itemId = this.$route.params.id;\n      axios.get(`${process.env.VUE_APP_BACKEND_URL}/items/${itemId}`).then(response => {\n        this.item = response.data;\n      }).catch(error => {\n        console.error('Failed to fetch item:', error);\n        alert('아이템 데이터를 불러오는데 실패했습니다.');\n      });\n    },\n    fetchCategories() {\n      axios.get(`${process.env.VUE_APP_BACKEND_URL}/categories`).then(response => {\n        this.categories = response.data;\n      }).catch(error => {\n        console.error('Failed to fetch categories:', error);\n      });\n    },\n    onFileChange(event) {\n      this.file = event.target.files[0];\n    },\n    updateItem() {\n      const itemId = this.$route.params.id;\n      const formData = new FormData();\n      formData.append('file', this.file);\n      axios.post(`${process.env.VUE_APP_BACKEND_URL}/upload`, formData).then(uploadResponse => {\n        const imageUrl = uploadResponse.data.filePath;\n        return axios.put(`${process.env.VUE_APP_BACKEND_URL}/items/${itemId}`, {\n          name: this.item.name,\n          categoryId: this.item.category_id,\n          description: this.item.description,\n          imageUrl: imageUrl\n        });\n      }).then(() => {\n        alert('아이템이 성공적으로 수정되었습니다.');\n        this.$router.push('/mypage');\n      }).catch(error => {\n        console.error('Failed to update item:', error);\n        alert('아이템 수정에 실패했습니다.');\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","item","name","category_id","description","image_url","categories","file","created","fetchItem","fetchCategories","methods","itemId","$route","params","id","get","process","env","VUE_APP_BACKEND_URL","then","response","catch","error","console","alert","onFileChange","event","target","files","updateItem","formData","FormData","append","post","uploadResponse","imageUrl","filePath","put","categoryId","$router","push"],"sources":["D:\\SecureCoding-Shopping-Site-A-MEN\\my-diary-app\\client\\src\\components\\EditItem.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h1>Edit Item</h1>\r\n      <form @submit.prevent=\"updateItem\">\r\n        <div>\r\n          <label for=\"name\">Name:</label>\r\n          <input type=\"text\" id=\"name\" v-model=\"item.name\" required>\r\n        </div>\r\n        <div>\r\n          <label for=\"category\">Category:</label>\r\n          <select id=\"category\" v-model=\"item.category_id\" required>\r\n            <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\r\n              {{ category.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label for=\"description\">Description:</label>\r\n          <textarea id=\"description\" v-model=\"item.description\" required></textarea>\r\n        </div>\r\n        <div>\r\n          <label for=\"image\">Image:</label>\r\n          <input type=\"file\" id=\"image\" @change=\"onFileChange\">\r\n        </div>\r\n        <button type=\"submit\">Update Item</button>\r\n      </form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        item: {\r\n          name: '',\r\n          category_id: '',\r\n          description: '',\r\n          image_url: ''\r\n        },\r\n        categories: [],\r\n        file: null\r\n      };\r\n    },\r\n    created() {\r\n      this.fetchItem();\r\n      this.fetchCategories();\r\n    },\r\n    methods: {\r\n      fetchItem() {\r\n        const itemId = this.$route.params.id;\r\n        axios.get(`${process.env.VUE_APP_BACKEND_URL}/items/${itemId}`)\r\n          .then(response => {\r\n            this.item = response.data;\r\n          })\r\n          .catch(error => {\r\n            console.error('Failed to fetch item:', error);\r\n            alert('아이템 데이터를 불러오는데 실패했습니다.');\r\n          });\r\n      },\r\n      fetchCategories() {\r\n        axios.get(`${process.env.VUE_APP_BACKEND_URL}/categories`)\r\n          .then(response => {\r\n            this.categories = response.data;\r\n          })\r\n          .catch(error => {\r\n            console.error('Failed to fetch categories:', error);\r\n          });\r\n      },\r\n      onFileChange(event) {\r\n        this.file = event.target.files[0];\r\n      },\r\n      updateItem() {\r\n        const itemId = this.$route.params.id;\r\n        const formData = new FormData();\r\n        formData.append('file', this.file);\r\n  \r\n        axios.post(`${process.env.VUE_APP_BACKEND_URL}/upload`, formData)\r\n          .then(uploadResponse => {\r\n            const imageUrl = uploadResponse.data.filePath;\r\n            return axios.put(`${process.env.VUE_APP_BACKEND_URL}/items/${itemId}`, {\r\n              name: this.item.name,\r\n              categoryId: this.item.category_id,\r\n              description: this.item.description,\r\n              imageUrl: imageUrl\r\n            });\r\n          })\r\n          .then(() => {\r\n            alert('아이템이 성공적으로 수정되었습니다.');\r\n            this.$router.push('/mypage');\r\n          })\r\n          .catch(error => {\r\n            console.error('Failed to update item:', error);\r\n            alert('아이템 수정에 실패했습니다.');\r\n          });\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  "],"mappings":";AA8BE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,WAAW,EAAE,EAAE;QACfC,SAAS,EAAE;MACb,CAAC;MACDC,UAAU,EAAE,EAAE;MACdC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,SAAS,CAAC,CAAC;IAChB,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB,CAAC;EACDC,OAAO,EAAE;IACPF,SAASA,CAAA,EAAG;MACV,MAAMG,MAAK,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE;MACpChB,KAAK,CAACiB,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,mBAAoB,UAASP,MAAO,EAAC,EAC3DQ,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACpB,IAAG,GAAIoB,QAAQ,CAACrB,IAAI;MAC3B,CAAC,EACAsB,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CE,KAAK,CAAC,wBAAwB,CAAC;MACjC,CAAC,CAAC;IACN,CAAC;IACDf,eAAeA,CAAA,EAAG;MAChBX,KAAK,CAACiB,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,mBAAoB,aAAY,EACtDC,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACf,UAAS,GAAIe,QAAQ,CAACrB,IAAI;MACjC,CAAC,EACAsB,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACrD,CAAC,CAAC;IACN,CAAC;IACDG,YAAYA,CAACC,KAAK,EAAE;MAClB,IAAI,CAACpB,IAAG,GAAIoB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,MAAMlB,MAAK,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE;MACpC,MAAMgB,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC1B,IAAI,CAAC;MAElCR,KAAK,CAACmC,IAAI,CAAE,GAAEjB,OAAO,CAACC,GAAG,CAACC,mBAAoB,SAAQ,EAAEY,QAAQ,EAC7DX,IAAI,CAACe,cAAa,IAAK;QACtB,MAAMC,QAAO,GAAID,cAAc,CAACnC,IAAI,CAACqC,QAAQ;QAC7C,OAAOtC,KAAK,CAACuC,GAAG,CAAE,GAAErB,OAAO,CAACC,GAAG,CAACC,mBAAoB,UAASP,MAAO,EAAC,EAAE;UACrEV,IAAI,EAAE,IAAI,CAACD,IAAI,CAACC,IAAI;UACpBqC,UAAU,EAAE,IAAI,CAACtC,IAAI,CAACE,WAAW;UACjCC,WAAW,EAAE,IAAI,CAACH,IAAI,CAACG,WAAW;UAClCgC,QAAQ,EAAEA;QACZ,CAAC,CAAC;MACJ,CAAC,EACAhB,IAAI,CAAC,MAAM;QACVK,KAAK,CAAC,qBAAqB,CAAC;QAC5B,IAAI,CAACe,OAAO,CAACC,IAAI,CAAC,SAAS,CAAC;MAC9B,CAAC,EACAnB,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9CE,KAAK,CAAC,iBAAiB,CAAC;MAC1B,CAAC,CAAC;IACN;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}